{"version":3,"file":"StandardUi.js","sources":["../src/js/utils/ElementUtils.js","../src/js/BaseElement.js","../src/js/top/TitleDisplay.js","../node_modules/noop2/index.js","../src/js/Canvas.js","../src/js/top/CastButton.js","../src/js/top/PluginButton.js","../src/js/top/TopBar.js","../src/js/bottom/PlayButton.js","../src/js/bottom/StepBackButton.js","../src/js/bottom/StepForwardButton.js","../src/js/bottom/PlaylistButtons.js","../src/js/bottom/FullscreenButton.js","../src/js/bottom/TimeDisplay.js","../src/js/bottom/QualityButton/bitrate.js","../src/js/bottom/QualityButton/resolution.js","../src/js/bottom/QualityButton/index.js","../src/js/bottom/LanguageButton.js","../src/js/bottom/CaptionsButton.js","../src/js/bottom/SeekBarPreview.js","../src/js/bottom/SeekBar.js","../src/js/bottom/VolumeSlider.js","../src/js/bottom/BottomBar.js","../src/js/CondensedBar.js","../src/js/over/Preview.js","../src/js/ad/PlayButton.js","../src/js/AdControls.js","../src/js/over/PluginSpace.js","../src/js/over/Spinner.js","../src/js/StandardUi.js"],"sourcesContent":["export function classListAdd(element, ...classNames) {\n    for (var i = 0; i < classNames.length; i++) {\n        let className = classNames[i];\n\n        element.classList.add(className);\n    }\n}\n\nexport function classListRemove(element, ...classNames) {\n    for (var i = 0; i < classNames.length; i++) {\n        let className = classNames[i];\n\n        element.classList.remove(className);\n    }\n}\n","import { classListAdd, classListRemove } from './utils/ElementUtils';\n\nclass BaseElement {\n    constructor(meister) {\n        this.meister = meister;\n        this.isMobile = this.meister.browser.isMobile;\n\n        this.element = null;\n\n        this.eventStore = [];\n\n        if (this.onItemUnloaded) {\n            this.on('itemUnloaded', (e) => this.onItemUnloaded(e));\n        }\n    }\n\n    on(hook, handler) {\n        this.eventStore.push(...this.meister.on(hook, handler, this.constructor.name));\n    }\n\n    one(hook, block, handler) {\n        this.eventStore.push(...this.meister.one(hook, block, handler, this.constructor.name));\n    }\n\n    classListAdd(...args) {\n        if (this.isMobile) args.push('pf-mobile');\n        classListAdd(...args);\n    }\n\n    classListRemove(...args) {\n        classListRemove(...args);\n    }\n\n    getNode() {\n        return this.element;\n    }\n}\n\nexport default BaseElement;\n","import BaseElement from '../BaseElement';\n\nclass TitleDisplay extends BaseElement {\n    constructor(meister) {\n        super(meister);\n\n        this.element = document.createElement('div');\n        this.classListAdd(this.element, 'pf-ui-element', 'pf-ui-element-left', 'pf-ui-wrapper-left', 'pf-title');\n\n        this.title = '';\n        this.element.innerHTML = this.title;\n\n        this.on('itemMetadata', (metadata) => this.onItemMetadata(metadata));\n    }\n\n    onItemUnloaded() {\n        this.title = '';\n        this.element.innerHTML = this.title;\n    }\n\n    onItemMetadata(metadata) {\n        const title = metadata.title;\n        if (typeof title === 'string' || title instanceof String) {\n            this.title = metadata.title;\n            this.element.innerHTML = this.title;\n        }\n    }\n}\n\nexport default TitleDisplay;\n","module.exports = noop\n\n// no operation\n// null -> null\nfunction noop() {}\n\n// call noop to satisfy test cov suites\nnoop()\n","class Canvas {\n    constructor(meister) {\n        this.canvas = document.createElement('canvas');\n        this.context = this.canvas.getContext('2d');\n\n        this.canvas.width = meister.container.offsetWidth;\n        this.canvas.height = meister.container.offsetHeight;\n\n        // meister.container.appendChild(this.canvas);\n        this.meister = meister;\n\n    }\n\n    takeSnapshot() {\n        this.meister.playerPlugin.mediaElement.setAttribute('crossOrigin', 'anonymous');\n        let video = this.meister.playerPlugin.mediaElement;\n\n        this.context.drawImage(video, 0,0, this.canvas.width, this.canvas.height);\n\n        let img = new Image();\n\n        img.onload = () => {\n            let imgHeight = img.height / 8;\n            let imgWidth = img.width / 8;\n            let imgx = this.canvas.width - (imgWidth * 3);\n            let imgy = this.canvas.height - (imgHeight * 2.5);\n\n            this.context.drawImage(img, imgx, imgy, imgWidth, imgHeight);\n        };\n\n        img.src = 'https://upload.wikimedia.org/wikipedia/commons/thumb/2/26/Chromecast_cast_button_icon.svg/1000px-Chromecast_cast_button_icon.svg.png';\n\n        \n        return this.canvas;\n    }\n}\n\nexport default Canvas;\n","import noop from 'noop2';\nimport BaseElement from '../BaseElement';\nimport Canvas from '../Canvas';\n\nclass CastButton extends BaseElement {\n    constructor(meister) {\n        super(meister);\n\n        this.element = document.createElement('div');\n        this.classListAdd(this.element,\n            'pf-ui-element', 'pf-ui-element-right', 'pf-ui-element-active', 'pf-ui-element-hidden');\n        this.classListAdd(this.element, 'icon');\n\n        this.onClick = noop;\n\n        if (window.WebKitPlaybackTargetAvailabilityEvent) {\n            this.on('playerCreated', () => {\n                this.enableAirplay();\n            });\n        }\n\n        this.isChromecastAvailible((available) => {\n            if (!available) return;\n\n            this.classListAdd(this.element, 'icon_icCast');\n            this.classListRemove(this.element, 'pf-ui-element-hidden');\n            this.onClick = this.loadChromecast;\n\n            this.canvasVideo = new Canvas(meister);\n        });\n\n        this.element.addEventListener('click', () => this.onClick());\n    }\n\n    isChromecastAvailible(onStatusChange, tries = 5) {\n        if (tries === 0) {\n            onStatusChange(false);\n        }\n\n        if (!this.meister.browser.isChrome) {\n            onStatusChange(false);\n            return;\n        }\n\n        if (window.chrome && window.chrome.cast) {\n            onStatusChange(true);\n            return;\n        }\n\n        setTimeout(() => {\n            this.isChromecastAvailible(onStatusChange, tries - 1);\n        }, 1000);\n    }\n\n    enableAirplay() {\n        // If there is no player to add a listener to return. Should be redundant\n        if (!this.meister.playerPlugin) return;\n\n        const self = this;\n        this.meister.playerPlugin.mediaElement.addEventListener('webkitplaybacktargetavailabilitychanged', function (e) { //eslint-disable-line\n            // @TODO Can anyone look at this part and why it gives errors?\n            switch (e.availability) {\n            case 'available':\n                if (self.meister.config.debug) {\n                    console.log('AirPlay is available');\n                }\n\n                self.element.classList.remove('pf-ui-element-hidden');\n                self.element.classList.add('icon_icAirplay');\n\n                self.onClick = () => this.webkitShowPlaybackTargetPicker();\n                break;\n\n            case 'not-available':\n                if (self.meister.config.debug) {\n                    console.log('airplay not available');\n                }\n\n                self.element.classList.add('pf-ui-element-hidden');\n                self.element.classList.remove('icon_icAirplay');\n\n                self.onClick = noop;\n                break;\n            default:\n                break;\n            }\n        });\n    }\n\n    loadChromecast() {\n        // let snapshotCanvas = this.canvasVideo.takeSnapshot();\n        const src = this.meister.playerPlugin.currentSrc;\n\n        const player = this.meister.getPlayerByType('chromecast', {\n            src,\n            type: 'video/mp4',\n        });\n\n        // this.meister.playerWrapper.appendChild(snapshotCanvas);\n        player.currentSrc = src;\n        player.load();\n\n\n        // this.chromecaster.onUpdate((info) => {\n        //     console.log(info);\n        // });\n        //\n        // this.chromecaster.launchVideoElement(this.meister.playerPlugin.mediaElement);\n    }\n}\n\nexport default CastButton;\n","import BaseElement from '../BaseElement';\n\nclass PluginButton extends BaseElement {\n    constructor(name, icon, meister) {\n        super(meister);\n\n        this.element = document.createElement('div');\n        this.classListAdd(this.element,\n            'pf-ui-element', 'pf-ui-element-right', 'pf-ui-element-active', 'pf-plugin-overlay-open-button');\n\n        // TODO: Make this clever\n        this.element.innerHTML = icon;\n        this.name = name;\n\n        this.element.addEventListener('click', () => {\n            this.meister.trigger('uiPluginOpen', {\n                name: this.name,\n            });\n        });\n    }\n}\n\nexport default PluginButton;\n","import TitleDisplay from './TitleDisplay';\nimport CastButton from './CastButton';\nimport BaseElement from '../BaseElement';\nimport PluginButton from './PluginButton';\n\nclass TopBar extends BaseElement {\n    constructor(config, meister) {\n        super(meister);\n\n        this.config = config;\n\n        this.element = document.createElement('div');\n        this.classListAdd(this.element, 'pf-control-bar', 'top');\n\n        // Construct and append top left half.\n        this.titleDisplay = new TitleDisplay(meister);\n        this.element.appendChild(this.titleDisplay.getNode());\n\n        // Construct top right half.\n        this.topRightWrapper = document.createElement('div');\n        this.classListAdd(this.topRightWrapper, 'pf-ui-wrapper-right');\n\n        if (!this.config.castButton || !this.config.castButton.hide) {\n            this.castButton = new CastButton(meister);\n            this.topRightWrapper.appendChild(this.castButton.getNode());\n        }\n\n        // Append top right half\n        this.element.appendChild(this.topRightWrapper);\n\n        // Hide/show on plugin overlay\n        this.on('uiPluginOpen', () => this.onPluginOpen());\n        this.on('uiPluginClose', () => this.onPluginClose());\n\n        // Listen for plugins that want to add buttons.\n        this.on('uiPluginInserted', (info) => this.insertPlugin(info));\n\n        // Clicks inside the control bars shouldn't play/pause the player.\n        this.element.addEventListener('click', (e) => {\n            const clickEvent = e || event;\n            clickEvent.stopPropagation();\n        });\n    }\n\n    onPluginOpen() {\n        this.classListAdd(this.element, 'pf-ui-overlay-active');\n    }\n\n    onPluginClose() {\n        this.classListRemove(this.element, 'pf-ui-overlay-active');\n    }\n\n    insertPlugin(info) {\n        // TODO: Make the placement smart.\n        const newPlugin = new PluginButton(info.name, info.icon, this.meister);\n        this.topRightWrapper.appendChild(newPlugin.getNode());\n    }\n}\n\nexport default TopBar;\n","import BaseElement from '../BaseElement';\n\nclass PlayButton extends BaseElement {\n    constructor(meister, config, type = 'normal') {\n        super(meister);\n\n        this.config = config;\n        this.type = type;\n\n        this.element = document.createElement('div');\n        this.classListAdd(this.element, 'pf-ui-element', 'pf-ui-element-left', 'pf-ui-element-active');\n\n        this.isLive = false;\n\n        // Default\n        this.classListAdd(this.element, 'icon');\n        this.classListAdd(this.element, 'icon_icPlay');\n\n        // Register event listeners\n        this.element.addEventListener('click', () => this.onClick());\n\n        this.on('itemTimeInfo', (timeInfo) => this.onItemTimeInfo(timeInfo));\n        this.on('playerPlay', () => this.toggleIcon());\n        this.on('playerPause', () => this.toggleIcon());\n        this.on('itemLoaded', () => this.toggleIcon());\n    }\n\n    onItemTimeInfo(timeInfo) {\n        this.isLive = timeInfo.isLive;\n\n        if (this.isLive && this.config.disablePauseWithLive && this.meister.playing && this.type === 'normal') {\n            this.toggleIcon();\n        }\n    }\n\n    onClick() {\n        if (this.meister.playing) {\n            this.meister.pause(true);\n        } else {\n            this.meister.play(true);\n        }\n    }\n\n    toggleIcon() {\n        if (this.isLive && this.config.disablePauseWithLive && this.meister.playing && this.type === 'normal') {\n            this.classListRemove(this.element, 'icon_icPlay');\n            this.classListRemove(this.element, 'icon_icPause');\n            return;\n        }\n\n        if (this.meister.playing) {\n            this.classListAdd(this.element, 'icon_icPause');\n            this.classListRemove(this.element, 'icon_icPlay');\n        } else {\n            this.classListRemove(this.element, 'icon_icPause');\n            this.classListAdd(this.element, 'icon_icPlay');\n        }\n    }\n}\n\nexport default PlayButton;\n","import BaseElement from '../BaseElement';\n\nclass StepBackButton extends BaseElement {\n    constructor(meister, config) {\n        super(meister);\n        this.config = config;\n\n        this.element = document.createElement('div');\n        this.classListAdd(this.element, 'pf-ui-element', 'pf-ui-element-left', 'pf-ui-element-active');\n\n        // Default\n        this.classListAdd(this.element, 'icon');\n        this.classListAdd(this.element, 'icon_icStepBackward');\n\n        // Register event listeners\n        this.element.addEventListener('click', () => this.onClick());\n    }\n\n    onClick() {\n        this.meister.trigger('requestSeek', {\n            timeOffset: -1 * this.config.stepBack,\n        });\n    }\n}\n\nexport default StepBackButton;\n","import BaseElement from '../BaseElement';\n\nclass StepForwardButton extends BaseElement {\n    constructor(meister, config) {\n        super(meister);\n        this.config = config;\n\n        this.element = document.createElement('div');\n        this.classListAdd(this.element, 'pf-ui-element', 'pf-ui-element-left', 'pf-ui-element-active');\n\n        // Default\n        this.classListAdd(this.element, 'icon');\n        this.classListAdd(this.element, 'icon_icStepForward');\n\n        // Register event listeners\n        this.element.addEventListener('click', () => this.onClick());\n    }\n\n    onClick() {\n        this.meister.trigger('requestSeek', {\n            timeOffset: this.config.stepForward,\n        });\n    }\n}\n\nexport default StepForwardButton;\n","import BaseElement from '../BaseElement';\n\nclass PlaylistButtons extends BaseElement {\n    constructor(meister) {\n        super(meister);\n\n        this.element = document.createElement('div');\n        this.classListAdd(this.element, 'pf-ui-wrapper-left');\n        this.classListAdd(this.element, 'pf-ui-element-hidden');\n\n        this.prevButton = document.createElement('div');\n        this.classListAdd(this.prevButton, 'pf-ui-element');\n        this.classListAdd(this.prevButton, 'icon', 'icon_icPrev');\n\n        this.nextButton = document.createElement('div');\n        this.classListAdd(this.nextButton, 'pf-ui-element');\n        this.classListAdd(this.nextButton, 'icon', 'icon_icNext');\n\n        this.prevButton.addEventListener('click', () => this.meister.trigger('playlistPrevious'));\n        this.nextButton.addEventListener('click', () => this.meister.trigger('playlistNext'));\n\n        this.element.appendChild(this.prevButton);\n        this.element.appendChild(this.nextButton);\n\n        this.on('playlistInfo', (playlistInfo) => this.onPlaylistInfo(playlistInfo));\n    }\n\n    onPlaylistInfo(playlistInfo) {\n        // Reset the styles on the buttons.\n        this.classListRemove(this.prevButton, 'pf-ui-element-inactive');\n        this.classListRemove(this.nextButton, 'pf-ui-element-inactive');\n\n        // Don't show playlist controls when there is no playlist.\n        if (playlistInfo.length <= 1) {\n            this.classListAdd(this.element, 'pf-ui-element-hidden');\n            return;\n        }\n\n        // It's the first item, so can't go back.\n        if (playlistInfo.currentIndex === 0) {\n            this.classListAdd(this.prevButton, 'pf-ui-element-inactive');\n            this.classListAdd(this.nextButton, 'pf-ui-element-active');\n        }\n\n        // It's the last item, so can't skip to the next item.\n        if (playlistInfo.currentIndex >= playlistInfo.length - 1) {\n            this.classListAdd(this.prevButton, 'pf-ui-element-active');\n            this.classListAdd(this.nextButton, 'pf-ui-element-inactive');\n        }\n\n        // Show the playlist buttons.\n        this.classListRemove(this.element, 'pf-ui-element-hidden');\n    }\n}\n\nexport default PlaylistButtons;\n","import BaseElement from '../BaseElement';\n\nclass FullscreenButton extends BaseElement {\n    constructor(meister) {\n        super(meister);\n\n        this.element = document.createElement('div');\n\n        this.classListAdd(this.element, 'pf-ui-element', 'pf-ui-element-right');\n        if (this.meister.config.audioOnly) {\n            this.classListAdd(this.element, 'pf-ui-element-inactive');\n        } else {\n            this.classListAdd(this.element, 'pf-ui-element-active');\n        }\n\n        this.classListAdd(this.element, 'icon', 'icon_icFullscreen');\n\n        this.element.addEventListener('click', () => this.toggleFullscreen());\n\n        this.on('playerFullscreen', () => this.toggleIcon());\n    }\n\n    toggleIcon() {\n        const fullscreenElement = document.fullscreenElement\n            || document.webkitFullscreenElement\n            || document.mozFullScreenElement;\n\n        if (fullscreenElement) {\n            this.classListAdd(this.element, 'icon_icFullscreenExit');\n            this.classListRemove(this.element, 'icon_icFullscreen');\n        } else {\n            this.classListAdd(this.element, 'icon_icFullscreen');\n            this.classListRemove(this.element, 'icon_icFullscreenExit');\n        }\n    }\n\n    toggleFullscreen() {\n        if (this.meister.isFullscreen) {\n            this.meister.cancelFullscreen();\n        } else {\n            this.meister.requestFullscreen();\n        }\n    }\n}\n\nexport default FullscreenButton;\n","import BaseElement from '../BaseElement';\n\nconst LIVE_THRESHOLD = 35;\n\nclass TimeDisplay extends BaseElement {\n    constructor(meister) {\n        super(meister);\n\n        this.element = document.createElement('div');\n        this.classListAdd(this.element, 'pf-ui-element', 'pf-ui-element-left', 'pf-time-display');\n        // HACK: dirty microsoft\n        if (this.meister.browser.isIE || this.meister.browser.isEdge) {\n            this.classListAdd(this.element, 'microsoft-hack');\n        }\n\n        this.currentTime = document.createElement('span');\n        this.currentTime.innerHTML = '0:00';\n        this.classListAdd(this.currentTime, 'time-display-element');\n\n        this.seperator = document.createElement('span');\n        this.seperator.innerHTML = '/';\n        this.classListAdd(this.seperator, 'time-display-element');\n\n        this.duration = document.createElement('span');\n        this.duration.innerHTML = '0:00';\n        this.classListAdd(this.duration, 'time-display-element');\n        this.duration.addEventListener('click', () => this.meister.trigger('requestGoLive'));\n\n        this.element.appendChild(this.currentTime);\n        this.element.appendChild(this.seperator);\n        this.element.appendChild(this.duration);\n\n        this.isLive = false;\n\n        this.on('itemTimeInfo', (timeInfo) => this.onItemTimeInfo(timeInfo));\n        this.on('playerTimeUpdate', (e) => this.onTimeUpdate(e));\n        this.on('playerSeek', (e) => this.onPlayerSeek(e));\n\n        // Ad variables.\n        this.adTimer = null;\n        this.adDuration = 0;\n    }\n\n    onItemUnloaded() {\n        this.isLive = false;\n        this.classListRemove(this.duration, 'go-live', 'pf-ui-element-active');\n\n        this.currentTime.innerHTML = '-';\n        this.duration.innerHTML = '-';\n    }\n\n    onItemTimeInfo(timeInfo) {\n        if (timeInfo.isLive) {\n            this.isLive = true;\n            this.duration.innerHTML = 'LIVE';\n\n            if (!timeInfo.hasDVR) this.currentTime.innerHTML = '-';\n        } else {\n            this.duration.innerHTML = this.createTimeString(timeInfo.duration);\n        }\n    }\n\n    onTimeUpdate(e) {\n        // Set the duration and current time for VODs\n        if (!this.isLive) {\n            this.currentTime.innerHTML = this.createTimeString(e.currentTime);\n            this.duration.innerHTML = this.createTimeString(e.duration);\n            return;\n        }\n\n        // If a livestream is close enough to the edge display no time.\n        const behindLive = e.duration - e.currentTime;\n\n        if (behindLive < LIVE_THRESHOLD) {\n            this.currentTime.innerHTML = '-';\n            this.classListRemove(this.duration, 'go-live', 'pf-ui-element-active');\n            return;\n        }\n    }\n\n    onPlayerSeek(e) {\n        // Set the duration and current time for VODs\n        if (!this.isLive) {\n            this.currentTime.innerHTML = this.createTimeString(e.currentTime);\n            this.duration.innerHTML = this.createTimeString(e.duration);\n            return;\n        }\n\n        const behindLive = e.duration - e.currentTime;\n        if (behindLive < LIVE_THRESHOLD) {\n            this.currentTime.innerHTML = '-';\n            this.classListRemove(this.duration, 'go-live', 'pf-ui-element-active');\n            return;\n        }\n\n        // Display the amount of time the player is behind live.\n        const timeString = this.createTimeString(behindLive);\n        this.currentTime.innerHTML = `-${timeString}`;\n\n        // Activate the go live button.\n        this.classListAdd(this.duration, 'go-live', 'pf-ui-element-active');\n    }\n\n    createTimeString(time) {\n        let roundTime = Math.round(time);\n        if (roundTime < 0) {\n            roundTime = 0;\n        }\n\n        return this.meister.utils.timeToHMS(roundTime);\n    }\n}\n\nexport default TimeDisplay;\n","export function prepareBitrateOption(element, bitrate, index, transform) {\n    const qualityOption = element;\n\n    if (bitrate === 'auto') {\n        qualityOption.textContent = bitrate;\n    } else {\n        qualityOption.textContent = transform(bitrate);\n    }\n\n    qualityOption.setAttribute('index', index);\n}\n\nexport function selectBitrate(bitrates, index, silent) {\n    bitrates.forEach(bitrate => {\n        if (bitrate.index === index) {\n            bitrate.option.selected.classList.add('icon_icCheck');\n        } else {\n            bitrate.option.selected.classList.remove('icon_icCheck');\n        }\n    });\n\n    return silent ? null : index;\n}\n","export function expandQualityMapping(qualityMapping, index) {\n    return {\n        index,\n        bitrates: [],\n        from: qualityMapping.from,\n        to: qualityMapping.to,\n        resolution: qualityMapping.resolution,\n    };\n}\n\nfunction setResolution(bitrate, bitrateIndex, qualityMapping) {\n    const targetMapping = qualityMapping.find(mapping => bitrate > mapping.from && bitrate <= mapping.to);\n    if (!targetMapping) {\n        console.warn(`No resolution found for bitrate: ${bitrate}`);\n        return;\n    }\n\n    targetMapping.bitrates.push({\n        bitrate,\n        bitrateIndex,\n    });\n}\n\nexport function prepareResolutionMapping(bitrates, qualityMapping) {\n    bitrates.forEach(bitrateInfo => setResolution(bitrateInfo.bitrate, bitrateInfo.index, qualityMapping));\n    return bitrates;\n}\n\n\nexport function prepareResolutionOption(element, mapping) {\n    const qualityOption = element;\n\n    if (!mapping.resolution) {\n        console.error('Qualitymapping is missing a resolution-value', mapping);\n    }\n\n    qualityOption.textContent = mapping.resolution;\n    qualityOption.mapping = mapping;\n}\n\nexport function selectResolution(qualityMapping, index, silent = false) {\n    qualityMapping.forEach(mapping => {\n        if (!mapping.option) { return; }\n\n        const hasBitrate = !!mapping.bitrates.find(bitrate => bitrate.bitrateIndex === index);\n        if (hasBitrate) {\n            mapping.option.selected.classList.add('icon_icCheck');\n        } else {\n            mapping.option.selected.classList.remove('icon_icCheck');\n        }\n    });\n\n    return silent ? null : index;\n}\n","import BaseElement from '../../BaseElement';\n\nimport { prepareBitrateOption, selectBitrate } from './bitrate';\nimport { expandQualityMapping, prepareResolutionMapping, prepareResolutionOption, selectResolution } from './resolution';\n\nconst RESOLUTION = 0;\nconst BITRATE = 1;\n\nclass QualityButton extends BaseElement {\n    constructor(meister, config) {\n        super(meister);\n\n        this.config = config;\n        this.element = document.createElement('div');\n\n        this.classListAdd(this.element, 'pf-ui-element', 'pf-ui-element-right', 'pf-ui-element-active');\n        this.classListAdd(this.element, 'icon', 'icon_icHd');\n        this.classListAdd(this.element, 'pf-ui-element-hidden');\n\n        this.qualitySelector = document.createElement('div');\n        this.classListAdd(this.qualitySelector, 'pf-quality-selector', 'hidden');\n\n        this.meister.controlsWrapper.appendChild(this.qualitySelector);\n\n        this.element.addEventListener('click', (e) => this.onClick(e));\n\n        this.bitrates = null;\n        this.on('itemBitrates', (info) => this.onItemBitrates(info));\n\n        if (Array.isArray(this.config.qualityMapping)) {\n            this.qualityMappingMode = true;\n            this.qualityMapping = this.config.qualityMapping.map(expandQualityMapping);\n        }\n\n        // Store this eventfunction in the instance for easier removal.\n        this.hide = () => {\n            this.classListAdd(this.qualitySelector, 'hidden');\n            document.body.removeEventListener('click', this.hide);\n        };\n    }\n\n    onItemUnloaded() {\n        // Clear any previous bitrates that were present.\n        this.qualitySelector.innerHTML = '';\n        this.bitrates = null;\n\n        this.classListAdd(this.element, 'pf-ui-element-hidden');\n    }\n\n    onClick(e) {\n        // TODO: Perhaps do this later?\n        e.stopPropagation();\n\n        // Show/hide menu when the button is clicked.\n        if (!e.target.hasAttribute('index') && !e.target.mapping) {\n            if (this.qualitySelector.classList.contains('hidden')) {\n                this.show();\n            } else {\n                this.hide();\n            }\n\n            return;\n        }\n\n        // Element has attribute index, must be a bitrate option\n        if (e.target.hasAttribute('index')) {\n            const newBitrateIndex = parseInt(e.target.getAttribute('index'), 10);\n            this.selectOption(newBitrateIndex);\n        }\n\n        if (e.target.mapping) {\n            const newBitrateIndex = parseInt(e.target.mapping.bitrates[0].bitrateIndex, 10);\n            this.selectOption(newBitrateIndex);\n        }\n\n        this.hide();\n    }\n\n    show() {\n        this.classListRemove(this.qualitySelector, 'hidden');\n        document.body.addEventListener('click', this.hide);\n    }\n\n    onItemBitrates(info) {\n        info.bitrates.sort((a, b) => b.bitrate - a.bitrate);\n        this.bitrates = info.bitrates;\n        this.classListRemove(this.element, 'pf-ui-element-hidden');\n\n        if (this.qualityMappingMode) {\n            this.bitrates = prepareResolutionMapping(this.bitrates, this.qualityMapping);\n            this.qualityMapping.forEach(mapping => {\n                if (mapping.bitrates.length < 1) {\n                    if (this.meister.config.debug) console.error('No bitrates available for this mapping', mapping);\n                } else {\n                    // eslint-disable-next-line\n                    mapping.option = this.createOption({\n                        type: RESOLUTION,\n                        mapping,\n                    });\n                }\n            });\n        } else {\n            this.bitrates.forEach(bitrateInfo => {\n                // A bitrate of 0 means auto quality.\n                const bitrate = bitrateInfo.bitrate === 0 ? 'auto' : bitrateInfo.bitrate;\n                // eslint-disable-next-line\n                bitrateInfo.option = this.createOption({\n                    type: BITRATE,\n                    bitrate,\n                    index: bitrateInfo.index,\n                });\n            });\n        }\n        this.selectOption(info.currentIndex, true);\n    }\n\n    createOption(optionOpts) {\n        const qualityOption = document.createElement('div');\n        qualityOption.classList.add('pf-quality-option');\n        qualityOption.classList.add('pf-ui-element-active');\n\n        // When no index is passed we're dealing with resolution mapping.\n        if (optionOpts.type === BITRATE) {\n            const transform = this.config.bitrateToResolution ? this.config.bitrateToResolution : this.meister.utils.bitrateToResolution;\n\n            prepareBitrateOption(qualityOption, optionOpts.bitrate, optionOpts.index, transform);\n        } else if (optionOpts.type === RESOLUTION) {\n            prepareResolutionOption(qualityOption, optionOpts.mapping);\n        }\n\n        qualityOption.selected = document.createElement('div');\n        qualityOption.selected.classList.add('pf-quality-option-select');\n        qualityOption.selected.classList.add('icon');\n        // Check for mobile.\n        if (this.isMobile) qualityOption.selected.classList.add('pf-mobile');\n        qualityOption.appendChild(qualityOption.selected);\n\n        this.qualitySelector.appendChild(qualityOption);\n\n        qualityOption.addEventListener('click', (e) => this.onClick(e));\n\n        return qualityOption;\n    }\n\n    selectOption(index, silent = false) {\n        let bitrateIndex = null;\n\n        if (this.qualityMappingMode) {\n            bitrateIndex = selectResolution(this.qualityMapping, index, silent);\n        } else {\n            bitrateIndex = selectBitrate(this.bitrates, index, silent);\n        }\n\n        if (Number.isFinite(bitrateIndex)) {\n            this.meister.trigger('requestBitrate', {\n                bitrateIndex,\n            });\n        }\n    }\n}\n\nexport default QualityButton;\n","import BaseElement from '../BaseElement';\n\nclass LanguageButton extends BaseElement {\n    constructor(meister) {\n        super(meister);\n\n        this.element = document.createElement('div');\n\n        this.classListAdd(this.element, 'pf-ui-element', 'pf-ui-element-right', 'pf-ui-element-active');\n        this.classListAdd(this.element, 'icon', 'icon_icLanguage');\n        this.classListAdd(this.element, 'pf-ui-element-hidden');\n\n        this.on('itemLanguages', (languages) => this.onItemLanguages(languages));\n    }\n\n    onItemUnloaded() {\n        this.classListAdd(this.element, 'pf-ui-element-hidden');\n    }\n\n    onItemLanguages() {\n        this.classListRemove(this.element, 'pf-ui-element-hidden');\n\n        // TODO: Process languages.\n    }\n}\n\nexport default LanguageButton;\n","import BaseElement from '../BaseElement';\n\nclass CaptionsButton extends BaseElement {\n    constructor(meister) {\n        super(meister);\n\n        this.element = document.createElement('div');\n        this.classListAdd(this.element, 'pf-ui-element', 'pf-ui-element-right', 'pf-ui-element-active');\n        this.classListAdd(this.element, 'icon', 'icon_icCc');\n        this.classListAdd(this.element, 'pf-ui-element-hidden');\n\n        this.captionSelector = document.createElement('div');\n        this.classListAdd(this.captionSelector, 'pf-quality-selector', 'hidden');\n\n        this.element.appendChild(this.captionSelector);\n\n        this.element.addEventListener('click', this.onClick.bind(this));\n\n        this.captions = null;\n        this.on('itemLoaded', this.onItemLoaded.bind(this));\n\n        // Store this eventfunction in the instance for easier removal.\n        this.hide = () => {\n            this.classListAdd(this.captionSelector, 'hidden');\n            document.body.removeEventListener('click', this.hide);\n        };\n    }\n\n    onItemUnloaded() {\n        this.captionSelector.innerHTML = '';\n        this.captions = null;\n\n        this.classListAdd(this.element, 'pf-ui-element-hidden');\n    }\n\n    onClick(e) {\n        // TODO: Perhaps do this later?\n        e.stopPropagation();\n\n        // Show/hide menu when the button is clicked.\n        if (!e.target.hasAttribute('lang')) {\n            if (this.captionSelector.classList.contains('hidden')) {\n                this.show();\n            } else {\n                this.hide();\n            }\n\n            return;\n        }\n\n        // Element has attribute lang, must be a language option\n        const newLang = e.target.getAttribute('lang');\n        this.selectLang(newLang);\n        this.hide();\n    }\n\n    show() {\n        this.classListRemove(this.captionSelector, 'hidden');\n        document.body.addEventListener('click', this.hide);\n    }\n\n    onItemLoaded(e) {\n        if (!e.item || !e.item.captions) return;\n\n        // Slice to make a copy of the array;\n        if (!Array.isArray(e.item.captions)) {\n            this.captions = [e.item.captions];\n        } else {\n            this.captions = e.item.captions.slice(0).sort((a, b) => {\n                const titleA = a.title.toUpperCase();\n                const titleB = b.title.toUpperCase();\n                if (titleA < titleB) return -1;\n                if (titleA > titleB) return 1;\n\n                return 0;\n            });\n        }\n\n        // Add an option to turn cc off.\n        this.captions.push({ title: this.meister.Localization.get('NONE'), lang: 'none' });\n\n        this.classListRemove(this.element, 'pf-ui-element-hidden');\n\n        this.captions.forEach((caption) => {\n            const language = caption.title;\n            const code = caption.lang;\n            caption.option = this.createOption(language, code);\n        });\n\n        this.classListRemove(this.element, 'pf-ui-element-hidden');\n    }\n\n    createOption(language, code) {\n        const languageOption = document.createElement('div');\n        languageOption.classList.add('pf-quality-option');\n\n        languageOption.textContent = language.charAt(0).toUpperCase() + language.toLowerCase().slice(1);\n\n        languageOption.setAttribute('lang', code);\n\n        languageOption.selected = document.createElement('div');\n        languageOption.selected.classList.add('pf-quality-option-select');\n        languageOption.selected.classList.add('icon');\n        // Check for mobile.\n        if (this.isMobile) languageOption.selected.classList.add('pf-mobile');\n        languageOption.appendChild(languageOption.selected);\n\n        this.captionSelector.appendChild(languageOption);\n        return languageOption;\n    }\n\n    selectLang(languageCode) {\n        this.captions.forEach((caption) => {\n            caption.option.selected.classList.remove('icon_icCheck');\n        });\n\n        if (languageCode === 'none') {\n            this.meister.trigger('requestCaptions', { newLanguage: 'none' });\n            return;\n        }\n\n        const newCaption = this.captions.find((caption) => caption.lang === languageCode);\n\n        newCaption.option.selected.classList.add('icon_icCheck');\n        this.meister.trigger('requestCaptions', newCaption);\n    }\n}\n\nexport default CaptionsButton;\n","import BaseElement from '../BaseElement';\n\nclass SeekbarPreview extends BaseElement {\n    constructor(meister) {\n        super(meister);\n\n        this.element = document.createElement('div');\n        this.classListAdd(this.element, 'pf-seek-bar-preview', 'no-preview');\n        this.classListAdd(this.element, 'pf-ui-element-hidden');\n\n        this.seekBarPreviewImage = document.createElement('img');\n        this.classListAdd(this.seekBarPreviewImage, 'pf-seek-bar-preview-image');\n        this.seekBarPreviewImage.src = '';\n        this.element.appendChild(this.seekBarPreviewImage);\n\n        this.seekBarPreviewTime = document.createElement('span');\n        this.seekBarPreviewTime.textContent = '0:00';\n        this.classListAdd(this.seekBarPreviewTime, 'pf-seek-bar-preview-time');\n        this.element.appendChild(this.seekBarPreviewTime);\n\n        this.images = [];\n\n        this.on('itemTimeInfo', (timeInfo) => this.onItemTimeInfo(timeInfo));\n\n        this.on('itemImagestream', (info) => {\n            this.images = info.images;\n            this.classListRemove(this.element, 'no-preview');\n        });\n    }\n\n    onItemUnloaded() {\n        this.isLive = false;\n        this.modifiedDuration = null;\n        // Reset filmstrip\n        this.images = [];\n        this.classListAdd(this.element, 'no-preview');\n    }\n\n    onItemTimeInfo(timeInfo) {\n        // Special case for DASH dvr\n        if (timeInfo.isLive) {\n            this.isLive = true;\n            this.modifiedDuration = timeInfo.duration;\n        }\n    }\n\n    show() {\n        this.classListRemove(this.element, 'pf-ui-element-hidden');\n    }\n\n    hide() {\n        this.classListAdd(this.element, 'pf-ui-element-hidden');\n    }\n\n    update(percentage) {\n        const offsetWidth = this.element.offsetWidth;\n        const offsetParentWidth = this.element.offsetParent.offsetWidth;\n        const rightBoundary = offsetParentWidth - offsetWidth;\n\n        // Calculate how much the preview needs to move to the right.\n        let pixelsRight = (offsetParentWidth * percentage) - (offsetWidth / 2);\n\n        // Make it stay within the player.\n        if (pixelsRight < 0) {\n            pixelsRight = 0;\n        } else if (pixelsRight > rightBoundary) {\n            pixelsRight = rightBoundary;\n        }\n\n        this.element.style.transform = `translate(${pixelsRight}px)`;\n\n        let time = (this.modifiedDuration || this.meister.duration) * percentage;\n        this.seekBarPreviewImage.src = this.getImageByTime(time);\n\n        if (this.modifiedDuration) {\n            time = this.modifiedDuration - time;\n            const timeString = this.meister.utils.timeToHMS(Math.round(time));\n            this.seekBarPreviewTime.textContent = `-${timeString}`;\n        } else {\n            this.seekBarPreviewTime.textContent = this.meister.utils.timeToHMS(Math.round(time));\n        }\n    }\n\n    getImageByTime(time) {\n        if (this.images.length === 0) {\n            return '';\n        }\n\n        for (let i = 0; i < this.images.length; i++) {\n            const image = this.images[i];\n\n            if (image.start <= time && image.end >= time) {\n                return image.src;\n            }\n        }\n\n        return this.images[this.images.length - 1].src;\n    }\n}\n\nexport default SeekbarPreview;\n","import BaseElement from '../BaseElement';\nimport SeekbarPreview from './SeekBarPreview';\n\nfunction updateBar(element, percentage) {\n    element.style.webkitTransform = `scaleX(${percentage})`; //eslint-disable-line\n    element.style.transform = `scaleX(${percentage})`; //eslint-disable-line\n}\n\nclass SeekBar extends BaseElement {\n    constructor(meister) {\n        super(meister);\n\n        this.isDragging = false;\n\n        this.loadedMetadata = false;\n\n        this.mousedownX = 0;\n        this.pagedownX = 0;\n\n        this.element = document.createElement('div');\n        this.classListAdd(this.element, 'pf-seek-bar-wrapper');\n\n        this.seekBarPadding = document.createElement('div');\n        this.classListAdd(this.seekBarPadding, 'pf-seek-bar-padding');\n        this.element.appendChild(this.seekBarPadding);\n\n        this.seekBarDuration = document.createElement('div');\n        this.classListAdd(this.seekBarDuration, 'pf-seek-bar', 'duration');\n        this.element.appendChild(this.seekBarDuration);\n\n        this.seekBarBuffered = document.createElement('div');\n        this.classListAdd(this.seekBarBuffered, 'pf-seek-bar', 'buffered');\n        this.element.appendChild(this.seekBarBuffered);\n        this.seekBarBuffered.style.transform = 'scaleX(0)';\n\n        this.seekBarFill = document.createElement('div');\n        this.classListAdd(this.seekBarFill, 'pf-seek-bar', 'fill');\n        this.element.appendChild(this.seekBarFill);\n        this.seekBarFill.style.transform = 'scaleX(0)';\n\n        this.seekBarHighlight = document.createElement('div');\n        this.classListAdd(this.seekBarHighlight, 'pf-seek-bar', 'highlight');\n        this.element.appendChild(this.seekBarHighlight);\n        this.seekBarHighlight.style.transform = 'scaleX(0)';\n\n        this.seekBarFigure = document.createElement('div');\n        this.classListAdd(this.seekBarFigure, 'pf-seek-bar-figure');\n        this.seekBarDuration.appendChild(this.seekBarFigure);\n        this.seekBarFigure.style.left = '0%';\n\n        this.preview = new SeekbarPreview(meister);\n        this.seekBarDuration.appendChild(this.preview.getNode());\n\n        this.on('itemTimeInfo', (timeInfo) => this.onItemTimeInfo(timeInfo));\n        this.on('playerTimeUpdate', (e) => this.onTimeUpdate(e));\n        this.on('playerSeek', (e) => this.onPlayerSeek(e));\n        this.on('playerProgress', (e) => this.onPlayerProgress(e));\n        this.on('playerLoadedMetadata', () => { this.loadedMetadata = true; });\n\n        // Ad events.\n        this.points = {};\n        this.on('adCuePoints', (info) => this.onAdCuePoints(info));\n        this.on('adEnded', (info) => this.onAdEnded(info));\n\n        // Mouse hover events.\n        this.seekBarPadding.addEventListener('mouseover', (e) => this.onMouseOver(e));\n        this.seekBarPadding.addEventListener('mousemove', (e) => this.onMouseMove(e));\n        this.seekBarPadding.addEventListener('mouseout', () => this.onMouseOut());\n\n        // Seeking event listeners.\n        this.seekBarPadding.addEventListener('mousedown', (e) => this.onSeekDown(e));\n        this.seekBarPadding.addEventListener('touchstart', (e) => this.onSeekDown(e));\n\n        this.onSeekMove = (e) => {\n            // Prevent the page from moving while scrubbing\n            e.preventDefault();\n\n            // Get the location in the page, hacky for touch events...\n            const normalizedProgress = this.normalizeEventPosition(e);\n\n            if (this.isDragging) {\n                updateBar(this.seekBarFill, normalizedProgress);\n                updateBar(this.seekBarHighlight, normalizedProgress);\n                this.updateFigure(normalizedProgress);\n                this.preview.update(normalizedProgress);\n                this.updateCurrentTime(normalizedProgress);\n            }\n        };\n\n        this.onSeekUp = (e) => {\n            // Do nothing when a second touch ends.\n            if (window.TouchEvent && e instanceof window.TouchEvent && e.touches.length > 0) {\n                return;\n            }\n\n            if (this.isDragging) {\n                // Resume video\n                if (this.wasPlaying) this.meister.play();\n\n                this.isDragging = false;\n\n                // Always hide the preview on mobile.\n                if (window.TouchEvent && e instanceof window.TouchEvent) {\n                    this.preview.hide();\n                } else if (e.target !== this.seekBarPadding) {\n                    this.preview.hide();\n                }\n\n                document.removeEventListener('mousemove', this.onSeekMove);\n                document.removeEventListener('mouseup', this.onSeekUp);\n\n                document.removeEventListener('touchmove', this.onSeekMove);\n                document.removeEventListener('touchend', this.onSeekUp);\n            }\n        };\n    }\n\n    onItemUnloaded() {\n        this.loadedMetadata = false;\n\n        this.seekBarBuffered.style.transform = 'scaleX(0)';\n        this.seekBarHighlight.style.transform = 'scaleX(0)';\n        this.seekBarFill.style.transform = 'scaleX(0)';\n        this.seekBarFigure.style.left = '0%';\n\n        Object.keys(this.points).forEach((adID) => {\n            if (this.points[adID] !== null) {\n                this.points[adID].remove();\n            }\n        });\n\n        this.points = {};\n        this.classListAdd(this.element, 'pf-ui-element-hidden');\n    }\n\n    onItemTimeInfo(timeInfo) {\n        if (timeInfo.isLive && !timeInfo.hasDVR) {\n            this.classListAdd(this.element, 'pf-ui-element-hidden');\n        } else {\n            this.classListRemove(this.element, 'pf-ui-element-hidden');\n        }\n    }\n\n    onTimeUpdate(e) {\n        const normalizedProgress = e.currentTime / e.duration;\n\n        updateBar(this.seekBarFill, normalizedProgress);\n        this.updateFigure(normalizedProgress);\n    }\n\n    onPlayerProgress(e) {\n        if (!e) return;\n\n        const timeRanges = e.buffered;\n        const currentTimeRangeIndex = this.findTimerange(timeRanges);\n\n        // Should we not get an index don't bother updating.\n        if (currentTimeRangeIndex === -1) {\n            return;\n        }\n\n        let duration = this.meister.duration;\n        let targetTime = timeRanges.end(currentTimeRangeIndex);\n\n        if (this.playOffset) {\n            targetTime -= this.playOffset;\n            duration -= this.playOffset;\n        }\n\n        const normalizedProgress = targetTime / duration;\n        updateBar(this.seekBarBuffered, normalizedProgress);\n    }\n\n    // Mouse hover events.\n    onMouseOver(e) {\n        if (window.TouchEvent && e instanceof window.TouchEvent) {\n            this.pagedownX = e.touches[0].pageX;\n            const rect = e.target.getBoundingClientRect();\n            this.mousedownX = this.pagedownX - rect.left;\n        } else {\n            this.mousedownX = e.offsetX;\n            this.pagedownX = e.pageX;\n        }\n\n        this.preview.show();\n    }\n\n    onMouseMove(e) {\n        const normalizedProgress = this.normalizeEventPosition(e);\n\n        updateBar(this.seekBarHighlight, normalizedProgress);\n        this.preview.update(normalizedProgress);\n    }\n\n    onMouseOut() {\n        // Reset the highlight bar.\n        updateBar(this.seekBarHighlight, 0);\n\n        if (!this.isDragging) {\n            this.preview.hide();\n        }\n    }\n\n    // Seeking event handles.\n    onSeekDown(e) {\n        // Prevents user from selecting the page.\n        e.preventDefault();\n\n        // Get the preview to show and update.\n        this.onMouseOver(e);\n        this.onMouseMove(e);\n\n        // Pause video\n        this.wasPlaying = this.meister.playing;\n        this.meister.pause();\n\n        this.isDragging = true;\n\n        // Get the location in the page, hacky for touch events...\n        const normalizedProgress = this.normalizeEventPosition(e);\n\n        updateBar(this.seekBarFill, normalizedProgress);\n        this.updateFigure(normalizedProgress);\n        this.updateCurrentTime(normalizedProgress);\n\n        document.addEventListener('mousemove', this.onSeekMove);\n        document.addEventListener('mouseup', this.onSeekUp);\n\n        document.addEventListener('touchmove', this.onSeekMove);\n        document.addEventListener('touchend', this.onSeekUp);\n    }\n\n    // Player seeked, update the seekbar.\n    onPlayerSeek(e) {\n        const normalizedProgress = e.relativePosition;\n\n        updateBar(this.seekBarFill, normalizedProgress);\n        updateBar(this.seekBarHighlight, normalizedProgress);\n        this.updateFigure(normalizedProgress);\n    }\n\n    // Ad event handles/\n    onAdCuePoints(info) {\n        for (let i = 0; i < info.points.length; i++) {\n            this.setPoint(info.points[i]);\n        }\n    }\n\n    setPoint(time) {\n        const self = this;\n\n        function createPoint(t) {\n            const elem = document.createElement('div');\n            let normalizedProgress = t / self.meister.duration;\n\n            self.meister.elementUtils.classListAdd(elem, 'pf-seek-bar-point', 'pf-ad-point');\n            elem.id = `adpoint-${t}`;\n\n            if (t < 0) {\n                normalizedProgress = 1;\n            }\n\n            const pointPosition = 100 * normalizedProgress;\n            elem.style.left = `${pointPosition}%`;\n\n            self.seekBarDuration.appendChild(elem);\n            self.points[`adpoint-${t}`] = elem;\n        }\n\n        if (!this.loadedMetadata) {\n            this.one('playerLoadedMetadata', () => {\n                createPoint(time);\n            });\n        } else {\n            createPoint(time);\n        }\n    }\n\n    onAdEnded(info) {\n        const adPodInfo = info.ad.getAdPodInfo();\n\n        // Remove it on the end of the first ad in the break, because is simpler.\n        const element = document.getElementById(`adpoint-${adPodInfo.getTimeOffset()}`);\n        delete this.points[`adpoint-${adPodInfo.getTimeOffset()}`];\n\n        if (element !== null) {\n            element.remove();\n        }\n    }\n\n    // 'Private' methods.\n    normalizeEventPosition(e) {\n        let pageX = 0;\n        if (window.TouchEvent && e instanceof window.TouchEvent) {\n            pageX = e.touches[e.touches.length - 1].pageX;\n        } else {\n            pageX = e.pageX;\n        }\n\n        let position = pageX;\n        position = this.mousedownX + (pageX - this.pagedownX);\n\n        let normalizedProgress = position / this.seekBarPadding.offsetWidth;\n\n        // Stay within the boundaries\n        if (normalizedProgress > 1.0) {\n            normalizedProgress = 1.0;\n        } else if (normalizedProgress < 0) {\n            normalizedProgress = 0;\n        }\n\n        return normalizedProgress;\n    }\n\n    updateFigure(percentage) {\n        const figureLeftPercentage = 100 * percentage;\n        this.seekBarFigure.style.left = `${figureLeftPercentage}%`;\n    }\n\n    updateCurrentTime(percentage) {\n        this.meister.trigger('requestSeek', {\n            relativePosition: percentage,\n        });\n    }\n\n    findTimerange(timeRanges) {\n        for (let i = 0; i < timeRanges.length; i++) {\n            if (this.meister.currentTime >= timeRanges.start(i)\n                && this.meister.currentTime <= timeRanges.end(i)\n            ) {\n                return i;\n            }\n        }\n\n        // No range was found\n        return -1;\n    }\n}\n\nexport default SeekBar;\n","import BaseElement from '../BaseElement';\n\nclass VolumeSlider extends BaseElement {\n    constructor(meister) {\n        super(meister);\n\n        this.isDragging = false;\n        this.mousedownX = 0;\n        this.pagedownX = 0;\n\n        this.element = document.createElement('div');\n        this.classListAdd(this.element, 'pf-ui-element', 'pf-ui-element-left');\n        // Can't control volume on iOS when it's not playing inline\n        if (this.meister.browser.isiOS && !this.meister.config.iosPlaysInline) {\n            this.classListAdd(this.element, 'pf-ui-element-inactive');\n        } else {\n            this.classListAdd(this.element, 'pf-ui-element-active');\n        }\n\n        this.volumeButton = document.createElement('div');\n        this.classListAdd(this.volumeButton, 'pf-volume-button');\n        this.classListAdd(this.volumeButton, 'icon', 'icon_icVol0');\n        this.element.appendChild(this.volumeButton);\n\n        this.sliderWrapper = document.createElement('div');\n        this.classListAdd(this.sliderWrapper, 'pf-volume-slider-wrapper');\n        this.element.appendChild(this.sliderWrapper);\n\n        this.volumeBar = document.createElement('div');\n        this.classListAdd(this.volumeBar, 'pf-volume-slider', 'close');\n        this.sliderWrapper.appendChild(this.volumeBar);\n\n        this.volumeBarFill = document.createElement('div');\n        this.classListAdd(this.volumeBarFill, 'pf-volume-slider-fill');\n        this.volumeBar.appendChild(this.volumeBarFill);\n\n        this.volumeBarFigure = document.createElement('div');\n        this.classListAdd(this.volumeBarFigure, 'pf-volume-slider-figure');\n        this.volumeBar.appendChild(this.volumeBarFigure);\n\n        // Add volume event listeners.\n        this.on('playerVolumeChange', () => this.onVolumeChange());\n        this.on('playerLoadedMetadata', () => this.onVolumeChange());\n\n        // Add mouse event listeners\n        this.volumeButton.addEventListener('click', () => this.onClick());\n\n        this.element.addEventListener('mouseover', () => this.showSlider(true));\n        this.element.addEventListener('mouseleave', () => this.showSlider(false));\n\n        this.sliderWrapper.addEventListener('mousedown', (e) => this.onDown(e));\n        this.sliderWrapper.addEventListener('touchstart', (e) => this.onDown(e));\n\n        this.onMove = (e) => {\n            if (this.isDragging) {\n                this.updateBar(e);\n            }\n        };\n\n        this.onUp = (e) => {\n            if (this.isDragging) {\n                this.isDragging = false;\n\n                if (e.target !== this.sliderWrapper) {\n                    this.showSlider(false);\n                }\n\n                document.removeEventListener('mousemove', this.onMove);\n                document.removeEventListener('mouseup', this.onUp);\n\n                document.addEventListener('touchmove', this.onMove);\n                document.addEventListener('touchend', this.onUp);\n            }\n        };\n    }\n\n    onDown(e) {\n        // Prevents user from selecting the page.\n        e.preventDefault();\n\n        this.isDragging = true;\n\n        if (window.TouchEvent && e instanceof window.TouchEvent) {\n            this.pagedownX = e.touches[0].pageX;\n            const rect = e.target.getBoundingClientRect();\n            this.mousedownX = this.pagedownX - rect.left;\n        } else {\n            this.mousedownX = e.offsetX;\n            this.pagedownX = e.pageX;\n        }\n\n        this.updateBar(e);\n\n        document.addEventListener('mousemove', this.onMove);\n        document.addEventListener('mouseup', this.onUp);\n\n        document.addEventListener('touchmove', this.onMove);\n        document.addEventListener('touchend', this.onUp);\n    }\n\n    showSlider(on) {\n        if (this.isDragging) {\n            return;\n        }\n\n        if (on) {\n            this.classListAdd(this.volumeBar, 'open');\n            this.classListRemove(this.volumeBar, 'close');\n        } else {\n            this.classListRemove(this.volumeBar, 'open');\n            this.classListAdd(this.volumeBar, 'close');\n        }\n    }\n\n    onClick() {\n        this.meister.muted = !this.meister.muted;\n        this.meister.trigger('playerVolumeChange');\n    }\n\n    onVolumeChange() {\n        let normalizedProgress = this.meister.volume;\n\n        if (this.meister.muted) {\n            normalizedProgress = 0;\n        }\n\n        this.volumeBarFill.style.transform = `scaleX(${normalizedProgress})`;\n        const leftPercentage = 100 * normalizedProgress;\n        this.volumeBarFigure.style.left = `${leftPercentage}%`;\n\n        this.updateIcon();\n    }\n\n    updateBar(e) {\n        // Stop muting when the user changes the volume.\n        this.meister.muted = false;\n\n        let volume = this.normalizeEventPosition(e);\n\n        if (volume > 1) {\n            volume = 1;\n        } else if (volume < 0) {\n            volume = 0;\n        }\n\n        this.meister.volume = volume;\n    }\n\n    clearIcons() {\n        for (let i = 0; i <= 3; i++) {\n            this.classListRemove(this.volumeButton, `icon_icVol${i}`);\n        }\n    }\n\n    updateIcon() {\n        this.clearIcons();\n\n        const volume = this.meister.volume;\n        let iconNum = 0;\n\n        if (this.meister.muted) {\n            iconNum = 0;\n        } else if (volume <= 0.25 && volume >= 0.01) {\n            iconNum = 1;\n        } else if (volume >= 0.25 && volume <= 0.66) {\n            iconNum = 2;\n        } else if (volume >= 0.66 && volume <= 1) {\n            iconNum = 3;\n        }\n\n        this.classListAdd(this.volumeButton, `icon_icVol${iconNum}`);\n    }\n\n    normalizeEventPosition(e) {\n        let pageX = 0;\n        if (window.TouchEvent && e instanceof window.TouchEvent) {\n            pageX = e.touches[e.touches.length - 1].pageX;\n        } else {\n            pageX = e.pageX;\n        }\n\n        let position = pageX;\n        position = this.mousedownX + (pageX - this.pagedownX);\n\n        let normalizedProgress = position / this.volumeBar.offsetWidth;\n\n        // Stay within the boundaries\n        if (normalizedProgress > 1.0) {\n            normalizedProgress = 1.0;\n        } else if (normalizedProgress < 0) {\n            normalizedProgress = 0;\n        }\n\n        return normalizedProgress;\n    }\n}\n\nexport default VolumeSlider;\n","import PlayButton from './PlayButton';\nimport StepBackButton from './StepBackButton';\nimport StepForwardButton from './StepForwardButton';\nimport PlaylistButtons from './PlaylistButtons';\nimport FullscreenButton from './FullscreenButton';\nimport TimeDisplay from './TimeDisplay';\nimport QualityButton from './QualityButton';\nimport LanguageButton from './LanguageButton';\nimport CaptionsButton from './CaptionsButton';\nimport SeekBar from './SeekBar';\nimport VolumeSlider from './VolumeSlider';\nimport BaseElement from '../BaseElement';\n\nclass BottomBar extends BaseElement {\n    constructor(config, meister) {\n        super(meister);\n\n        this.config = config;\n\n        this.element = document.createElement('div');\n        this.classListAdd(this.element, 'pf-control-bar', 'bottom');\n\n        // Construct the bottom left half\n        this.bottomLeftWrapper = document.createElement('div');\n        this.classListAdd(this.bottomLeftWrapper, 'pf-ui-wrapper-left');\n\n        // step back button:\n        if (this.config.stepBack) {\n            this.stepBackButton = new StepBackButton(meister, config);\n            this.bottomLeftWrapper.appendChild(this.stepBackButton.getNode());\n        }\n\n        this.playButton = new PlayButton(meister, config);\n        this.bottomLeftWrapper.appendChild(this.playButton.getNode());\n\n        if (this.config.stepForward) {\n            this.stepForwardButton = new StepForwardButton(meister, config);\n            this.bottomLeftWrapper.appendChild(this.stepForwardButton.getNode());\n        }\n\n        this.playlistButton = new PlaylistButtons(meister);\n        this.bottomLeftWrapper.appendChild(this.playlistButton.getNode());\n\n        this.volumeSlider = new VolumeSlider(meister);\n        this.bottomLeftWrapper.appendChild(this.volumeSlider.getNode());\n\n        this.timeDisplay = new TimeDisplay(meister);\n        this.bottomLeftWrapper.appendChild(this.timeDisplay.getNode());\n\n\n        // Append to wrapper\n        this.element.appendChild(this.bottomLeftWrapper);\n\n        // Construct and append the top wrapper\n        this.seekBar = new SeekBar(meister);\n        this.element.appendChild(this.seekBar.getNode());\n\n        // Construct the bottom right half\n        this.bottomRightWrapper = document.createElement('div');\n        this.classListAdd(this.bottomRightWrapper, 'pf-ui-wrapper-right');\n\n        this.fullscreenButton = new FullscreenButton(meister);\n        this.bottomRightWrapper.appendChild(this.fullscreenButton.getNode());\n\n        if (!this.config.qualityButton || !this.config.qualityButton.hide) {\n            this.qualityButton = new QualityButton(meister, this.config);\n            this.bottomRightWrapper.appendChild(this.qualityButton.getNode());\n        }\n\n        this.langButton = new LanguageButton(meister);\n        this.bottomRightWrapper.appendChild(this.langButton.getNode());\n\n        this.ccButton = new CaptionsButton(meister);\n        this.bottomRightWrapper.appendChild(this.ccButton.getNode());\n\n        // Append to wrapper\n        this.element.appendChild(this.bottomRightWrapper);\n\n        // Hide/show on plugin overlay\n        this.on('uiPluginOpen', () => this.onPluginOpen());\n        this.on('uiPluginClose', () => this.onPluginClose());\n\n        // Clicks inside the control bars shouldn't play/pause the player.\n        this.element.addEventListener('click', (e) => {\n            const clickEvent = e || event;\n            clickEvent.stopPropagation();\n        });\n    }\n\n    hide() {\n        if (this.qualityButton) {\n            this.qualityButton.hide();\n        }\n    }\n\n    onPluginOpen() {\n        this.classListAdd(this.element, 'pf-ui-overlay-active');\n    }\n\n    onPluginClose() {\n        this.classListRemove(this.element, 'pf-ui-overlay-active');\n    }\n}\n\nexport default BottomBar;\n","import PlayButton from './bottom/PlayButton';\nimport StepBackButton from './bottom/StepBackButton';\nimport StepForwardButton from './bottom/StepForwardButton';\nimport PlaylistButtons from './bottom/PlaylistButtons';\nimport TimeDisplay from './bottom/TimeDisplay';\nimport QualityButton from './bottom/QualityButton';\nimport SeekBar from './bottom/SeekBar';\nimport VolumeSlider from './bottom/VolumeSlider';\nimport CastButton from './top/CastButton';\nimport BaseElement from './BaseElement';\n\nclass CondensedBar extends BaseElement {\n    constructor(config, meister) {\n        super(meister);\n\n        this.config = config;\n\n        this.element = document.createElement('div');\n        this.classListAdd(this.element, 'pf-control-bar', 'bottom');\n\n        // Construct the bottom left half\n        this.bottomLeftWrapper = document.createElement('div');\n        this.classListAdd(this.bottomLeftWrapper, 'pf-ui-wrapper-left');\n\n        // step back button:\n        if (this.config.stepBack) {\n            this.stepBackButton = new StepBackButton(meister, config);\n            this.bottomLeftWrapper.appendChild(this.stepBackButton.getNode());\n        }\n\n        this.playButton = new PlayButton(meister, config);\n        this.bottomLeftWrapper.appendChild(this.playButton.getNode());\n\n        if (this.config.stepForward) {\n            this.stepForwardButton = new StepForwardButton(meister, config);\n            this.bottomLeftWrapper.appendChild(this.stepForwardButton.getNode());\n        }\n\n        this.playlistButton = new PlaylistButtons(meister);\n        this.bottomLeftWrapper.appendChild(this.playlistButton.getNode());\n\n        this.volumeSlider = new VolumeSlider(meister);\n        this.bottomLeftWrapper.appendChild(this.volumeSlider.getNode());\n\n        this.timeDisplay = new TimeDisplay(meister);\n        this.bottomLeftWrapper.appendChild(this.timeDisplay.getNode());\n\n\n        // Append to wrapper\n        this.element.appendChild(this.bottomLeftWrapper);\n\n        // Construct and append the top wrapper\n        this.seekBar = new SeekBar(meister);\n        this.element.appendChild(this.seekBar.getNode());\n\n        // Construct the bottom right half\n        this.bottomRightWrapper = document.createElement('div');\n        this.classListAdd(this.bottomRightWrapper, 'pf-ui-wrapper-right');\n\n        if (!this.config.castButton || !this.config.castButton.hide) {\n            this.castButton = new CastButton(meister);\n            this.bottomRightWrapper.appendChild(this.castButton.getNode());\n        }\n\n        if (!this.config.qualityButton || !this.config.qualityButton.hide) {\n            this.qualityButton = new QualityButton(meister, this.config);\n            this.bottomRightWrapper.appendChild(this.qualityButton.getNode());\n        }\n\n        // Append to wrapper\n        this.element.appendChild(this.bottomRightWrapper);\n\n        // Hide/show on plugin overlay\n        this.on('uiPluginOpen', () => this.onPluginOpen());\n        this.on('uiPluginClose', () => this.onPluginClose());\n\n        // Clicks inside the control bars shouldn't play/pause the player.\n        this.element.addEventListener('click', (e) => {\n            const clickEvent = e || event;\n            clickEvent.stopPropagation();\n        });\n    }\n\n    hide() {\n        if (this.qualityButton) {\n            this.qualityButton.hide();\n        }\n    }\n\n    onPluginOpen() {\n        this.classListAdd(this.element, 'pf-ui-overlay-active');\n    }\n\n    onPluginClose() {\n        this.classListRemove(this.element, 'pf-ui-overlay-active');\n    }\n}\n\nexport default CondensedBar;\n","import BaseElement from '../BaseElement';\n\nclass Preview extends BaseElement {\n    constructor(meister) {\n        super(meister);\n\n        this.element = document.createElement('div');\n        this.classListAdd(this.element, 'pf-preview');\n\n        this.info = document.createElement('div');\n        this.classListAdd(this.info, 'pf-preview-info');\n\n        this.infoTitle = document.createElement('span');\n        this.info.appendChild(this.infoTitle);\n        this.infoDescription = document.createElement('span');\n        this.info.appendChild(this.infoDescription);\n\n        this.playButton = document.createElement('div');\n\n        // HACK: The first time itemUnloaded is always called.\n        // This prevents the preview from showing correctly.\n        this.isLoaded = false;\n\n        this.classListAdd(this.playButton,\n            'pf-preview-play-button', 'pf-ui-element-active', 'pf-ui-element-hidden');\n        this.classListAdd(this.playButton, 'icon', 'icon_icPlay');\n\n        this.element.appendChild(this.info);\n        this.element.appendChild(this.playButton);\n\n        this.on('uiEvent', (e) => {\n            if (e.type === 'splash') {\n                this.classListRemove(this.element, 'pf-ui-element-hidden');\n\n                if (!e.info) return;\n\n                if (e.info.thumbnailURL) {\n                    this.element.style['background-image'] = `url(${e.info.thumbnailURL})`;\n                }\n\n                if (e.info.title) {\n                    this.infoTitle.innerHTML = `${e.info.title}<br><br>`;\n                }\n\n                if (e.info.description) {\n                    this.infoDescription.textContent = e.info.description;\n                }\n            }\n        });\n\n        this.on('itemLoaded', () => this.classListRemove(this.playButton, 'pf-ui-element-hidden'));\n\n        this.element.addEventListener('click', (e) => {\n            const clickEvent = e || event;\n            clickEvent.stopPropagation();\n\n            this.classListAdd(this.element, 'pf-ui-element-hidden');\n            this.meister.play();\n        });\n\n        this.on('playerPlay', () => {\n            this.classListAdd(this.element, 'pf-ui-element-hidden');\n        });\n    }\n\n    onItemUnloaded() {\n        if (!this.isLoaded) {\n            this.isLoaded = true;\n            return;\n        }\n\n        this.element.style['background-image'] = '';\n        this.infoTitle.innerHTML = '';\n        this.infoDescription.textContent = '';\n    }\n}\n\nexport default Preview;\n","import BaseElement from '../BaseElement';\n\nclass PlayButton extends BaseElement {\n    constructor(meister) {\n        super(meister);\n\n        this.isPlaying = true;\n\n        this.element = document.createElement('div');\n        this.meister.elementUtils.classListAdd(this.element,\n            'pf-ui-element', 'pf-ui-element-left', 'pf-ui-element-active');\n\n        // Default\n        this.element.classList.add('icon');\n        this.element.classList.add('icon_icPause');\n\n        // Register event listeners\n        this.element.addEventListener('click', () => this.onClick());\n\n        this.on('playerPlay', () => {\n            this.isPlaying = true;\n            this.toggleIcon();\n        });\n        this.on('playerPause', () => {\n            this.isPlaying = false;\n            this.toggleIcon();\n        });\n        this.on('itemLoaded', () => this.toggleIcon());\n    }\n\n    onClick() {\n        if (this.isPlaying) {\n            this.meister.pause();\n            this.isPlaying = false;\n        } else {\n            this.meister.play();\n            this.isPlaying = true;\n        }\n\n        this.toggleIcon();\n    }\n\n    toggleIcon(state) {\n        this.isPlaying = state !== undefined ? state : this.isPlaying;\n        if (this.isPlaying) {\n            this.element.classList.add('icon_icPause');\n            this.element.classList.remove('icon_icPlay');\n        } else {\n            this.element.classList.remove('icon_icPause');\n            this.element.classList.add('icon_icPlay');\n        }\n    }\n}\n\nexport default PlayButton;\n","import BaseElement from './BaseElement';\nimport PlayButton from './ad/PlayButton';\nimport FullscreenButton from './bottom/FullscreenButton';\nimport VolumeSlider from './bottom/VolumeSlider';\n\nclass AdControls extends BaseElement {\n    constructor(meister, config) {\n        super(meister);\n\n        this.element = document.createElement('div');\n        this.classListAdd(this.element, 'pf-ui-element-hidden');\n\n        this.adControls = document.createElement('div');\n        this.classListAdd(this.adControls, 'pf-ad-controls');\n        this.element.appendChild(this.adControls);\n\n        // Progress bar adding\n        this.progressBar = document.createElement('div');\n        this.classListAdd(this.progressBar, 'pf-ad-progress-bar-fill');\n        this.progressBar.style.transform = 'scaleX(0)';\n        this.adControls.appendChild(this.progressBar);\n\n        this.adInfoView = document.createElement('div');\n        this.classListAdd(this.adInfoView, 'pf-ad-info-view');\n        this.adControls.appendChild(this.adInfoView);\n\n        // The real controls (play/pause)\n        this.extraAdControlsWrapper = document.createElement('div');\n        this.classListAdd(this.extraAdControlsWrapper, 'pf-extra-ad-controls');\n        this.classListAdd(this.extraAdControlsWrapper, 'pf-ui-element-hidden');\n        this.element.appendChild(this.extraAdControlsWrapper);\n\n        // Add the controls to the wrapper\n        this.adPlayButton = new PlayButton(meister, config, 'ad');\n        this.extraAdControlsWrapper.appendChild(this.adPlayButton.getNode());\n\n        this.fullscreenButton = new FullscreenButton(meister);\n        this.classListAdd(this.fullscreenButton.getNode(), 'pf-ad-fullscreen');\n        this.classListRemove(this.fullscreenButton.getNode(), 'pf-mobile');\n        this.extraAdControlsWrapper.appendChild(this.fullscreenButton.getNode());\n\n        this.volumeSlider = new VolumeSlider(meister);\n        this.classListRemove(this.volumeSlider.getNode(), 'pf-mobile');\n        this.extraAdControlsWrapper.appendChild(this.volumeSlider.getNode());\n\n        // advertisement count\n        this.adCount = document.createElement('div');\n        this.classListAdd(this.adCount, 'pf-ad-count');\n        this.adCount.textContent = 'Ad 1 of X';\n        this.adInfoView.appendChild(this.adCount);\n\n        this.adCountDown = document.createElement('div');\n        this.classListAdd(this.adCountDown, 'pf-ad-countdown');\n        this.adCountDown.textContent = '(0)';\n        this.adInfoView.appendChild(this.adCountDown);\n\n        this.meister.container.addEventListener('mousemove', () => {\n            // HACK: Need to make actual touch-friendly ad controls.\n            if (this.meister.browser.isMobile) {\n                return;\n            }\n\n            this.adControls.classList.add('pf-ad-controls-move-up');\n            this.adControls.classList.remove('pf-ad-controls-move-down');\n\n            this.extraAdControlsWrapper.classList.remove('pf-ui-element-hidden');\n            this.extraAdControlsWrapper.classList.add('pf-ad-controls-shown-animation');\n            this.extraAdControlsWrapper.classList.remove('pf-ad-controls-hide-animation');\n        });\n\n        this.meister.container.addEventListener('mouseleave', () => {\n            this.adControls.style.display = 'block';\n\n            this.adControls.classList.remove('pf-ad-controls-move-up');\n            this.adControls.classList.add('pf-ad-controls-move-down');\n\n            this.extraAdControlsWrapper.classList.remove('pf-ad-controls-shown-animation');\n            this.extraAdControlsWrapper.classList.add('pf-ad-controls-hide-animation');\n        });\n\n        this.on('adStarted', (info) => {\n            const ad = info.adsManager.getCurrentAd();\n            const adPodInfo = ad.getAdPodInfo();\n\n            this.adCount.textContent = `Ad ${adPodInfo.getAdPosition()} of ${adPodInfo.getTotalAds()}`;\n            const adDuration = this.meister.utils.timeToHMS(Math.round(ad.getDuration()));\n            this.adCountDown.textContent = `(${adDuration})`;\n        });\n\n        this.on('adTimeupdate', (info) => {\n            const normalizedProgress = info.currentTime / info.duration;\n            this.progressBar.style.transform = `scaleX(${normalizedProgress})`;\n\n            const timeLeft = Math.round(info.duration - info.currentTime);\n            const timeLeftString = this.meister.utils.timeToHMS(timeLeft);\n            this.adCountDown.textContent = `(${timeLeftString})`;\n        });\n\n        this.on('adEnded', () => {\n            this.progressBar.style.transform = 'scaleX(0)';\n            this.adCountDown.textContent = '(0)';\n        });\n    }\n\n    show() {\n        this.classListRemove(this.element, 'pf-ui-element-hidden');\n        this.meister.muted = this.meister.config.startMuted;\n        this.meister.trigger('playerVolumeChange');\n        this.adPlayButton.toggleIcon(true);\n    }\n\n    hide() {\n        this.classListAdd(this.element, 'pf-ui-element-hidden');\n        // Reset the progress bar.\n        this.progressBar.style.transform = 'scaleX(0)';\n        this.adCount.textContent = 'Ad 1 of X';\n        this.adCountDown.textContent = '(0)';\n    }\n}\n\nexport default AdControls;\n","import BaseElement from '../BaseElement';\n\nclass PluginSpace extends BaseElement {\n    constructor(meister, controls) {\n        super(meister);\n\n        this.controls = controls;\n\n        this.element = document.createElement('div');\n        this.classListAdd(this.element, 'pf-plugin-overlay');\n        this.classListAdd(this.element, 'pf-ui-element-hidden');\n\n        // Stop the click event so the player won't play/pause.\n        this.element.addEventListener('click', (e) => {\n            const clickEvent = e || event;\n            clickEvent.stopPropagation();\n        });\n\n        this.closeButton = document.createElement('div');\n        this.classListAdd(this.closeButton,\n            'pf-ui-element-active', 'pf-plugin-overlay-close-button');\n        this.closeButton.innerHTML = '✖︎';\n        this.closeButton.addEventListener('click', this.closeSpace.bind(this));\n\n        this.element.appendChild(this.closeButton);\n\n        this.on('uiPluginOpen', this.onPluginOpen.bind(this));\n    }\n\n    closeSpace() {\n        this.meister.trigger('uiPluginClose');\n        this.classListAdd(this.element, 'pf-ui-element-hidden');\n    }\n\n    onPluginOpen() {\n        this.classListRemove(this.element, 'pf-ui-element-hidden');\n    }\n}\n\nexport default PluginSpace;\n","import BaseElement from '../BaseElement';\n\nclass Spinner extends BaseElement {\n    constructor(meister) {\n        super(meister);\n\n        this.meister = meister;\n\n        this.element = document.createElement('div');\n        this.classListAdd(this.element, 'pf-spinner-wrapper');\n\n        this.spinner = document.createElement('div');\n        this.classListAdd(this.spinner, 'pf-spinner-loading');\n        this.element.appendChild(this.spinner);\n\n        this.spinnerMessage = document.createElement('div');\n        this.classListAdd(this.spinnerMessage, 'pf-spinner-message');\n        this.element.appendChild(this.spinnerMessage);\n\n        // Register events.\n        this.on('playerBufferedEnough', () => this.hideSpinner(true));\n        this.on('playerPause', () => this.hideSpinner());\n        this.on('itemUnloaded', () => this.hideSpinner());\n        this.on('playerPlay', () => this.hideSpinner());\n        this.on('showLoading', (e) => this.showSpinner(e));\n        this.on('hideLoading', () => this.hideSpinner());\n    }\n\n    showSpinner(e) {\n        this.classListRemove(this.element, 'hidden');\n        this.classListRemove(this.spinner, 'hidden');\n\n        if (e && e.message) {\n            this.spinnerMessage.innerHTML = e.message;\n            this.classListRemove(this.spinnerMessage, 'hidden');\n        } else if (e && e.code) {\n            this.spinnerMessage.innerHTML = this.meister.Localization.get(e.code);\n            this.classListRemove(this.spinnerMessage, 'hidden');\n        }\n    }\n\n    hideSpinner(fromBuffering) {\n        // HACK quick fix so other hides don't hide buffering indicator\n        if (this.spinnerMessage.innerHTML === 'Buffering...' && !fromBuffering) {\n            return;\n        }\n\n        this.classListAdd(this.element, 'hidden');\n        this.classListAdd(this.spinner, 'hidden');\n        this.classListAdd(this.spinnerMessage, 'hidden');\n    }\n}\n\nexport default Spinner;\n","import TopBar from './top/TopBar';\nimport BottomBar from './bottom/BottomBar';\nimport CondensedBar from './CondensedBar';\nimport Preview from './over/Preview';\nimport AdControls from './AdControls';\nimport PluginSpace from './over/PluginSpace';\nimport Spinner from './over/Spinner';\n\nlet TIME_TILL_FADE = 3000;\n\nclass StandardUi extends Meister.Ui {\n\n    static get KEY_SPACEBAR() { return 32; }\n    static get KEY_MEDIAPLAYPAUSE() { return 179; }\n\n    constructor(config, meister) {\n        super(config, meister);\n\n        if (Number.isFinite(this.config.timeToFade)) {\n            TIME_TILL_FADE = this.config.timeToFade * 1000;\n        }\n\n        this.standardWrapper = document.createElement('div');\n        this.meister.elementUtils.classListAdd(this.standardWrapper, 'pf-controls-wrapper');\n\n        this.preview = new Preview(meister);\n        this.spinner = new Spinner(meister);\n\n        this.isLive = false;\n\n        // Don't add this listener on mobile; makes controls annyoing to show\n        if (!this.meister.browser.isMobile) {\n            this.meister.on('itemTimeInfo', (timeInfo) => {\n                this.isLive = timeInfo.isLive;\n            });\n\n            this.standardWrapper.addEventListener('click', () => {\n                if (this.isLive && this.config.disablePauseWithLive) {\n                    return;\n                }\n\n                if (this.meister.playing) {\n                    this.meister.pause(true);\n                } else {\n                    this.meister.play(true);\n                }\n            });\n        }\n\n        if (this.config.condensedUi) {\n            this.bottomBar = new CondensedBar(config, meister);\n        } else {\n            this.topBar = new TopBar(config, meister);\n            this.bottomBar = new BottomBar(config, meister);\n        }\n\n        this.adControls = new AdControls(meister, config);\n        this.pluginSpace = new PluginSpace(meister, this);\n\n        this.on('adBreakStarted', (e) => this.onAdBreakStarted(e));\n        this.on(['adBreakEnded', 'itemUnloaded'], (e) => this.onAdBreakEnded(e));\n\n        // Bind class methods to instance for easier event listener removal.\n        this.onMouseDown = this.onMouseDown.bind(this);\n        this.onMouseUp = this.onMouseUp.bind(this);\n        this.onMouseMove = this.onMouseMove.bind(this);\n        this.onMouseLeave = this.onMouseLeave.bind(this);\n\n        this.mouseTimeout = null;\n        this.controlsTimeout = null;\n        this.isControlsShown = false;\n\n        this.fixedControls = !!this.config.fixedControls;\n        this.toggleFixedControls(this.fixedControls);\n\n        this.on('standard:toggleFixedControls', (e) => this.toggleFixedControls(e.fixed));\n    }\n\n    static get pluginName() {\n        return 'StandardUi';\n    }\n\n    toggleFixedControls(on) {\n        if (on) {\n            this.meister.container.removeEventListener('mousedown', this.onMouseDown);\n            this.meister.container.removeEventListener('touchstart', this.onMouseDown);\n\n            this.meister.container.removeEventListener('mousemove', this.onMouseMove);\n            this.meister.container.removeEventListener('touchmove', this.onMouseMove);\n            this.meister.container.removeEventListener('mouseleave', this.onMouseLeave);\n\n            this.showControls();\n            this.showCursor();\n        } else {\n            this.meister.container.addEventListener('mousedown', this.onMouseDown);\n            this.meister.container.addEventListener('touchstart', this.onMouseDown);\n\n            this.meister.container.addEventListener('mousemove', this.onMouseMove);\n            this.meister.container.addEventListener('touchmove', this.onMouseMove);\n            this.meister.container.addEventListener('mouseleave', this.onMouseLeave);\n\n            // Start hide countdown.\n            this.mouseTimeout = setTimeout(this.hideCursor.bind(this), TIME_TILL_FADE);\n            this.controlsTimeout = setTimeout(this.hideControls.bind(this), TIME_TILL_FADE);\n        }\n    }\n\n    onMouseDown() {\n        this.dragging = true;\n        window.addEventListener('mouseup', this.onMouseUp);\n        window.addEventListener('touchend', this.onMouseUp);\n    }\n\n    onMouseUp() {\n        this.dragging = false;\n        // Fake mouse movement\n        this.onMouseMove();\n\n        window.removeEventListener('mouseup', this.onMouseUp);\n        window.removeEventListener('touchend', this.onMouseUp);\n    }\n\n    onMouseMove() {\n        clearTimeout(this.mouseTimeout);\n        clearTimeout(this.controlsTimeout);\n\n        this.showControls();\n        this.showCursor();\n\n        this.mouseTimeout = setTimeout(this.hideCursor.bind(this), TIME_TILL_FADE);\n        this.controlsTimeout = setTimeout(this.hideControls.bind(this), TIME_TILL_FADE);\n    }\n\n    onMouseLeave() {\n        clearTimeout(this.mouseTimeout);\n        clearTimeout(this.controlsTimeout);\n\n        this.hideControls();\n        this.showCursor();\n    }\n\n    onAdBreakStarted() {\n        this.meister.elementUtils.classListAdd(this.standardWrapper, 'pf-ui-element-hidden');\n        this.meister.adWrapper.classList.remove('pf-ui-element-hidden');\n        this.adControls.show();\n    }\n\n    onAdBreakEnded() {\n        this.meister.elementUtils.classListRemove(this.standardWrapper, 'pf-ui-element-hidden');\n        this.meister.adWrapper.classList.add('pf-ui-element-hidden');\n        this.adControls.hide();\n    }\n\n    hideCursor() {\n        if (this.dragging) {\n            return;\n        }\n\n        this.meister.container.style.cursor = 'none';\n    }\n\n    showCursor() {\n        this.meister.container.style.cursor = 'auto';\n    }\n\n    hideControls() {\n        if (this.dragging || !this.meister.playing) {\n            return;\n        }\n\n        this.bottomBar.getNode().classList.add('hidden');\n        if (!this.config.condensedUi) { this.topBar.getNode().classList.add('hidden'); }\n        this.bottomBar.hide();\n\n        if (this.isControlsShown) {\n            this.meister.trigger('uiEvent:hideControls', {});\n        }\n\n        this.isControlsShown = false;\n    }\n\n    showControls() {\n        this.bottomBar.getNode().classList.remove('hidden');\n        if (!this.config.condensedUi) { this.topBar.getNode().classList.remove('hidden'); }\n\n        if (!this.isControlsShown) {\n            this.meister.trigger('uiEvent:showControls', {});\n        }\n\n        this.isControlsShown = true;\n    }\n\n    draw() {\n        this.standardWrapper.appendChild(this.preview.getNode());\n        this.standardWrapper.appendChild(this.spinner.getNode());\n\n        this.standardWrapper.appendChild(this.pluginSpace.getNode());\n        if (!this.config.condensedUi) { this.standardWrapper.appendChild(this.topBar.getNode()); }\n        this.standardWrapper.appendChild(this.bottomBar.getNode());\n        this.meister.adWrapper.appendChild(this.adControls.getNode());\n\n        this.controlsWrapper.appendChild(this.standardWrapper);\n\n        // Insert other ui plugins\n        this.meister.trigger('uiReady', {\n            pluginSpace: this.pluginSpace.getNode(),\n        });\n    }\n\n    destroy() {\n        super.destroy();\n\n        clearTimeout(this.mouseTimeout);\n        clearTimeout(this.controlsTimeout);\n\n        window.removeEventListener('mouseup', this.onMouseUp);\n        window.removeEventListener('touchend', this.onMouseUp);\n    }\n}\n\nMeister.registerPlugin(StandardUi.pluginName, StandardUi);\n\nexport default StandardUi;\n"],"names":["classListAdd","element","classNames","i","length","className","classList","add","classListRemove","remove","BaseElement","meister","isMobile","browser","eventStore","onItemUnloaded","on","e","hook","handler","push","constructor","name","block","one","args","TitleDisplay","document","createElement","title","innerHTML","metadata","onItemMetadata","String","noop","Canvas","canvas","context","getContext","width","container","offsetWidth","height","offsetHeight","playerPlugin","mediaElement","setAttribute","video","drawImage","img","Image","onload","imgHeight","imgWidth","imgx","imgy","src","CastButton","onClick","window","WebKitPlaybackTargetAvailabilityEvent","enableAirplay","isChromecastAvailible","available","loadChromecast","canvasVideo","addEventListener","onStatusChange","tries","isChrome","chrome","cast","self","availability","config","debug","log","webkitShowPlaybackTargetPicker","currentSrc","player","getPlayerByType","load","PluginButton","icon","trigger","TopBar","titleDisplay","appendChild","getNode","topRightWrapper","castButton","hide","onPluginOpen","onPluginClose","info","insertPlugin","clickEvent","event","stopPropagation","newPlugin","PlayButton","type","isLive","timeInfo","onItemTimeInfo","toggleIcon","disablePauseWithLive","playing","pause","play","StepBackButton","stepBack","StepForwardButton","stepForward","PlaylistButtons","prevButton","nextButton","playlistInfo","onPlaylistInfo","currentIndex","FullscreenButton","audioOnly","toggleFullscreen","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","isFullscreen","cancelFullscreen","requestFullscreen","LIVE_THRESHOLD","TimeDisplay","isIE","isEdge","currentTime","seperator","duration","onTimeUpdate","onPlayerSeek","adTimer","adDuration","hasDVR","createTimeString","behindLive","timeString","time","roundTime","Math","round","utils","timeToHMS","prepareBitrateOption","bitrate","index","transform","qualityOption","textContent","selectBitrate","bitrates","silent","forEach","option","selected","expandQualityMapping","qualityMapping","from","to","resolution","setResolution","bitrateIndex","targetMapping","find","mapping","warn","prepareResolutionMapping","bitrateInfo","prepareResolutionOption","error","selectResolution","hasBitrate","RESOLUTION","BITRATE","QualityButton","qualitySelector","controlsWrapper","onItemBitrates","Array","isArray","qualityMappingMode","map","body","removeEventListener","target","hasAttribute","contains","show","newBitrateIndex","parseInt","getAttribute","selectOption","sort","a","b","console","createOption","optionOpts","bitrateToResolution","Number","isFinite","LanguageButton","languages","onItemLanguages","CaptionsButton","captionSelector","bind","captions","onItemLoaded","newLang","selectLang","item","slice","titleA","toUpperCase","titleB","Localization","get","lang","caption","language","code","languageOption","charAt","toLowerCase","languageCode","newLanguage","newCaption","SeekbarPreview","seekBarPreviewImage","seekBarPreviewTime","images","modifiedDuration","percentage","offsetParentWidth","offsetParent","rightBoundary","pixelsRight","style","getImageByTime","image","start","end","updateBar","webkitTransform","SeekBar","isDragging","loadedMetadata","mousedownX","pagedownX","seekBarPadding","seekBarDuration","seekBarBuffered","seekBarFill","seekBarHighlight","seekBarFigure","left","preview","onPlayerProgress","points","onAdCuePoints","onAdEnded","onMouseOver","onMouseMove","onMouseOut","onSeekDown","onSeekMove","preventDefault","normalizedProgress","normalizeEventPosition","updateFigure","update","updateCurrentTime","onSeekUp","TouchEvent","touches","wasPlaying","keys","adID","timeRanges","buffered","currentTimeRangeIndex","findTimerange","targetTime","playOffset","pageX","rect","getBoundingClientRect","offsetX","relativePosition","setPoint","createPoint","t","elem","elementUtils","id","pointPosition","adPodInfo","ad","getAdPodInfo","getElementById","getTimeOffset","position","figureLeftPercentage","VolumeSlider","isiOS","iosPlaysInline","volumeButton","sliderWrapper","volumeBar","volumeBarFill","volumeBarFigure","onVolumeChange","showSlider","onDown","onMove","onUp","muted","volume","leftPercentage","updateIcon","clearIcons","iconNum","BottomBar","bottomLeftWrapper","stepBackButton","playButton","stepForwardButton","playlistButton","volumeSlider","timeDisplay","seekBar","bottomRightWrapper","fullscreenButton","qualityButton","langButton","ccButton","CondensedBar","Preview","infoTitle","infoDescription","isLoaded","thumbnailURL","description","isPlaying","state","undefined","AdControls","adControls","progressBar","adInfoView","extraAdControlsWrapper","adPlayButton","adCount","adCountDown","display","adsManager","getCurrentAd","getAdPosition","getTotalAds","getDuration","timeLeft","timeLeftString","startMuted","PluginSpace","controls","closeButton","closeSpace","Spinner","spinner","spinnerMessage","hideSpinner","showSpinner","message","fromBuffering","TIME_TILL_FADE","StandardUi","timeToFade","standardWrapper","condensedUi","bottomBar","topBar","pluginSpace","onAdBreakStarted","onAdBreakEnded","onMouseDown","onMouseUp","onMouseLeave","mouseTimeout","controlsTimeout","isControlsShown","fixedControls","toggleFixedControls","fixed","showControls","showCursor","setTimeout","hideCursor","hideControls","dragging","adWrapper","cursor","Meister","Ui","registerPlugin","pluginName"],"mappings":"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"}